import{w as Ge,S as pe,i as ge,s as me,e as g,t as I,a as f,b as S,c as o,l as A,d as J,n as _e,f as B,g as x,h as re,m as se,j,k as W,o as oe,p as k,q as tt,r as lt,u as de,F as Me,v as at,x as nt,y as He,z as qe,A as rt,B as st,C as G,D as Je,E as he,G as ot}from"./vendor.eb5c447d.js";const it=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&t(i)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerpolicy&&(a.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?a.credentials="include":r.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}};it();const ve=(l=1,e)=>Array(e+1-l).fill({}).map((n,t)=>l+t),ee=Ge({name:"",mp3Files:[]});let ut={name:"",tags:{album:"",artist:"",comment:{language:"",text:""},genre:"",APIC:"",title:"",trackNumber:"",trackNum:0,totalTracks:0,year:""}};const N=Ge(ut);function ct(l){let e,n,t,r;return{c(){e=g("p"),n=I(l[0]),f(e,"class","hover:cursor-pointer pt-2")},m(a,i){S(a,e,i),o(e,n),t||(r=A(e,"click",l[2]),t=!0)},p(a,[i]){i&1&&J(n,a[0])},i:_e,o:_e,d(a){a&&B(e),t=!1,r()}}}function ft(l,e,n){let t;x(l,ee,i=>n(1,t=i));let{filename:r}=e;const a=i=>{let m=window.api.openFile(t.name,i.target.innerText);m.tags.APIC=m.tags.raw.APIC?m.tags.raw.APIC.imageBuffer:"",N.set({name:m.name,tags:m.tags})};return l.$$set=i=>{"filename"in i&&n(0,r=i.filename)},[r,t,a]}class pt extends pe{constructor(e){super();ge(this,e,ft,ct,me,{filename:0})}}function We(l,e,n){const t=l.slice();return t[1]=e[n],t}function Ye(l){let e,n;return e=new pt({props:{filename:l[1]}}),{c(){re(e.$$.fragment)},m(t,r){se(e,t,r),n=!0},p(t,r){const a={};r&1&&(a.filename=t[1]),e.$set(a)},i(t){n||(j(e.$$.fragment,t),n=!0)},o(t){W(e.$$.fragment,t),n=!1},d(t){oe(e,t)}}}function gt(l){let e,n,t=l[0].name+"",r,a,i,m=l[0].mp3Files,p=[];for(let c=0;c<m.length;c+=1)p[c]=Ye(We(l,m,c));const h=c=>W(p[c],1,1,()=>{p[c]=null});return{c(){e=g("div"),n=g("h3"),r=I(t),a=k();for(let c=0;c<p.length;c+=1)p[c].c();f(n,"class","font-bold text-xl"),f(e,"class","w-full pl-4 pt-4")},m(c,v){S(c,e,v),o(e,n),o(n,r),o(e,a);for(let _=0;_<p.length;_+=1)p[_].m(e,null);i=!0},p(c,[v]){if((!i||v&1)&&t!==(t=c[0].name+"")&&J(r,t),v&1){m=c[0].mp3Files;let _;for(_=0;_<m.length;_+=1){const M=We(c,m,_);p[_]?(p[_].p(M,v),j(p[_],1)):(p[_]=Ye(M),p[_].c(),j(p[_],1),p[_].m(e,null))}for(tt(),_=m.length;_<p.length;_+=1)h(_);lt()}},i(c){if(!i){for(let v=0;v<m.length;v+=1)j(p[v]);i=!0}},o(c){p=p.filter(Boolean);for(let v=0;v<p.length;v+=1)W(p[v]);i=!1},d(c){c&&B(e),de(p,c)}}}function mt(l,e,n){let t;return x(l,ee,r=>n(0,t=r)),[t]}class _t extends pe{constructor(e){super();ge(this,e,mt,gt,me,{})}}function dt(l){let e,n,t,r,a,i,m,p,h;return t=new Me({props:{icon:at,size:"lg",class:"px-[6px]"}}),i=new Me({props:{icon:nt,size:"lg",class:"px-[6px]"}}),{c(){e=g("div"),n=g("button"),re(t.$$.fragment),r=k(),a=g("button"),re(i.$$.fragment),f(e,"class","flex pl-4 p-2 shadow-md")},m(c,v){S(c,e,v),o(e,n),se(t,n,null),o(e,r),o(e,a),se(i,a,null),m=!0,p||(h=[A(n,"click",l[0]),A(a,"click",window.api.openDir)],p=!0)},p:_e,i(c){m||(j(t.$$.fragment,c),j(i.$$.fragment,c),m=!0)},o(c){W(t.$$.fragment,c),W(i.$$.fragment,c),m=!1},d(c){c&&B(e),oe(t),oe(i),p=!1,He(h)}}}function ht(l,e,n){let t,r;return x(l,N,i=>n(1,t=i)),x(l,ee,i=>n(2,r=i)),[()=>{window.api.saveTrack(`${r.name}/${t.name}`,t.tags)}]}class vt extends pe{constructor(e){super();ge(this,e,ht,dt,me,{})}}const be=["Blues","Classic Rock","Country","Dance","Disco","Funk","Grunge","Hip-Hop","Jazz","Metal","New Age","Oldies","Other","Pop","R&B","Rap","Reggae","Rock","Techno","Industrial","Alternative","Ska","Death Metal","Pranks","Soundtrack","Euro-Techno","Ambient","Trip-Hop","Vocal","Jazz+Funk","Fusion","Trance","Classical","Instrumental","Acid","House","Game","Sound Clip","Gospel","Noise","AlternRock","Bass","Soul","Punk","Space","Meditative","Instrumental Pop","Instrumental Rock","Ethnic","Gothic","Darkwave","Techno-Industrial","Electronic","Pop-Folk","Eurodance","Dream","Southern Rock","Comedy","Cult","Gangsta","Top 40","Christian Rap","Pop/Funk","Jungle","Native American","Cabaret","New Wave","Psychadelic","Rave","Showtunes","Trailer","Lo-Fi","Tribal","Acid Punk","Acid Jazz","Polka","Retro","Musical","Rock & Roll","Hard Rock"];function Ue(l,e,n){const t=l.slice();return t[12]=e[n],t}function Ke(l,e,n){const t=l.slice();return t[15]=e[n],t}function Ve(l,e,n){const t=l.slice();return t[18]=e[n],t}function Qe(l){let e,n=l[18]+"",t,r;return{c(){e=g("option"),t=I(n),e.__value=r=l[18],e.value=e.__value},m(a,i){S(a,e,i),o(e,t)},p:_e,d(a){a&&B(e)}}}function Xe(l){let e,n=l[15]+"",t,r,a=l[0].tags.totalTracks+"",i,m,p;return{c(){e=g("option"),t=I(n),r=I("/"),i=I(a),e.__value=m=""+(l[15]+"/"+l[0].tags.totalTracks),e.value=e.__value,e.selected=p=l[15]==l[0].tags.trackNum},m(h,c){S(h,e,c),o(e,t),o(e,r),o(e,i)},p(h,c){c&1&&n!==(n=h[15]+"")&&J(t,n),c&1&&a!==(a=h[0].tags.totalTracks+"")&&J(i,a),c&1&&m!==(m=""+(h[15]+"/"+h[0].tags.totalTracks))&&(e.__value=m,e.value=e.__value),c&1&&p!==(p=h[15]==h[0].tags.trackNum)&&(e.selected=p)},d(h){h&&B(e)}}}function Ze(l){let e,n=l[0].tags.genre+"",t,r;return{c(){e=g("option"),t=I(n),e.__value=r=l[0].tags.genre,e.value=e.__value,e.selected=!0},m(a,i){S(a,e,i),o(e,t)},p(a,i){i&1&&n!==(n=a[0].tags.genre+"")&&J(t,n),i&1&&r!==(r=a[0].tags.genre)&&(e.__value=r,e.value=e.__value)},d(a){a&&B(e)}}}function xe(l){let e,n=l[12]+"",t,r,a;return{c(){e=g("option"),t=I(n),e.__value=r=l[12],e.value=e.__value,e.selected=a=l[12]==l[0].tags.genre},m(i,m){S(i,e,m),o(e,t)},p(i,m){m&1&&a!==(a=i[12]==i[0].tags.genre)&&(e.selected=a)},d(i){i&&B(e)}}}function et(l){let e,n;return{c(){e=g("img"),qe(e.src,n=l[1](l[0].tags.APIC))||f(e,"src",n),f(e,"alt","Album Cover"),f(e,"width","384"),f(e,"height","384")},m(t,r){S(t,e,r)},p(t,r){r&1&&!qe(e.src,n=t[1](t[0].tags.APIC))&&f(e,"src",n)},d(t){t&&B(e)}}}function bt(l){let e,n,t,r,a,i,m=(l[0].name||"No track selected")+"",p,h,c,v,_,M,Y,d,$,Ae,ie,Pe,R,Ie,z,te,ke,Ne,y,U,P,ue=l[0].tags.year+"",$e,ce,Re,le,we,ye,K,ae,De,ne,Te,Oe,D,Ce=!be.includes(l[0].tags.genre),Ee,Se,fe,Be,O,ze,H,Le,V,q,Fe,je;n=new vt({});let Q=ve(1900,new Date().getFullYear()).reverse(),w=[];for(let s=0;s<Q.length;s+=1)w[s]=Qe(Ve(l,Q,s));let X=ve(1,l[0].tags.totalTracks),T=[];for(let s=0;s<X.length;s+=1)T[s]=Xe(Ke(l,X,s));let C=Ce&&Ze(l),Z=be,E=[];for(let s=0;s<Z.length;s+=1)E[s]=xe(Ue(l,Z,s));let F=l[0].tags.APIC&&et(l);return V=new _t({}),{c(){e=g("main"),re(n.$$.fragment),t=k(),r=g("div"),a=g("form"),i=g("p"),p=I(m),h=k(),c=g("p"),c.textContent="Title:",v=k(),_=g("input"),M=k(),Y=g("p"),Y.textContent="Artist:",d=k(),$=g("input"),Ae=k(),ie=g("p"),ie.textContent="Album:",Pe=k(),R=g("input"),Ie=k(),z=g("div"),te=g("div"),ke=g("p"),ke.textContent="Year:",Ne=k(),y=g("select"),U=g("optgroup"),P=g("option"),$e=I(ue);for(let s=0;s<w.length;s+=1)w[s].c();Re=k(),le=g("div"),we=g("p"),we.textContent="Track:",ye=k(),K=g("select"),ae=g("optgroup");for(let s=0;s<T.length;s+=1)T[s].c();De=k(),ne=g("div"),Te=g("p"),Te.textContent="Genre:",Oe=k(),D=g("select"),C&&C.c(),Ee=rt();for(let s=0;s<E.length;s+=1)E[s].c();Se=k(),fe=g("p"),fe.textContent="Comment:",Be=k(),O=g("input"),ze=k(),H=g("div"),F&&F.c(),Le=k(),re(V.$$.fragment),f(i,"class","font-bold"),f(c,"class","mt-4"),f(_,"type","text"),f(_,"name","title"),f(_,"class","border-[#E1E1E1] border-2 pl-2"),f(Y,"class","mt-4"),f($,"type","text"),f($,"name","artist"),f($,"class","border-[#E1E1E1] border-2 pl-2"),f(ie,"class","mt-4"),f(R,"type","text"),f(R,"name","album"),f(R,"class","border-[#E1E1E1] border-2 pl-2"),P.selected=!0,P.__value=ce=l[0].tags.year,P.value=P.__value,f(U,"label","Year"),f(y,"name","year"),f(y,"class","border-[#E1E1E1] border-2 w-full"),l[0].tags.year===void 0&&st(()=>l[8].call(y)),f(ae,"label","Track Number"),f(K,"name","trackNumber"),f(K,"class","border-[#E1E1E1] border-2 w-full"),f(D,"name","genre"),f(D,"class","border-[#E1E1E1] border-2 w-full"),f(z,"class","grid grid-flow-col grid-col-5 mt-4 gap-2"),f(fe,"class","mt-4"),f(O,"type","text"),f(O,"name","comment"),f(O,"class","border-[#E1E1E1] border-2 pl-2"),f(H,"class","w-72 h-72 2xl:w-96 2xl:h-96 border-2 border-black mt-8"),f(a,"action","#"),f(a,"class","flex flex-col bg-[#F0F0F0] p-4 h-full"),f(r,"class","flex"),f(e,"class","h-screen")},m(s,b){S(s,e,b),se(n,e,null),o(e,t),o(e,r),o(r,a),o(a,i),o(i,p),o(a,h),o(a,c),o(a,v),o(a,_),G(_,l[0].tags.title),o(a,M),o(a,Y),o(a,d),o(a,$),G($,l[0].tags.artist),o(a,Ae),o(a,ie),o(a,Pe),o(a,R),G(R,l[0].tags.album),o(a,Ie),o(a,z),o(z,te),o(te,ke),o(te,Ne),o(te,y),o(y,U),o(U,P),o(P,$e);for(let u=0;u<w.length;u+=1)w[u].m(U,null);Je(y,l[0].tags.year),o(z,Re),o(z,le),o(le,we),o(le,ye),o(le,K),o(K,ae);for(let u=0;u<T.length;u+=1)T[u].m(ae,null);o(z,De),o(z,ne),o(ne,Te),o(ne,Oe),o(ne,D),C&&C.m(D,null),o(D,Ee);for(let u=0;u<E.length;u+=1)E[u].m(D,null);o(a,Se),o(a,fe),o(a,Be),o(a,O),G(O,l[0].tags.comment.text),o(a,ze),o(a,H),F&&F.m(H,null),o(r,Le),se(V,r,null),q=!0,Fe||(je=[A(_,"input",l[5]),A($,"input",l[6]),A(R,"input",l[7]),A(y,"change",l[8]),A(K,"change",l[9]),A(O,"input",l[10]),A(H,"dragover",l[2]),A(H,"drop",l[3])],Fe=!0)},p(s,[b]){if((!q||b&1)&&m!==(m=(s[0].name||"No track selected")+"")&&J(p,m),b&1&&_.value!==s[0].tags.title&&G(_,s[0].tags.title),b&1&&$.value!==s[0].tags.artist&&G($,s[0].tags.artist),b&1&&R.value!==s[0].tags.album&&G(R,s[0].tags.album),(!q||b&1)&&ue!==(ue=s[0].tags.year+"")&&J($e,ue),(!q||b&1&&ce!==(ce=s[0].tags.year))&&(P.__value=ce,P.value=P.__value),b&0){Q=ve(1900,new Date().getFullYear()).reverse();let u;for(u=0;u<Q.length;u+=1){const L=Ve(s,Q,u);w[u]?w[u].p(L,b):(w[u]=Qe(L),w[u].c(),w[u].m(U,null))}for(;u<w.length;u+=1)w[u].d(1);w.length=Q.length}if(b&1&&Je(y,s[0].tags.year),b&1){X=ve(1,s[0].tags.totalTracks);let u;for(u=0;u<X.length;u+=1){const L=Ke(s,X,u);T[u]?T[u].p(L,b):(T[u]=Xe(L),T[u].c(),T[u].m(ae,null))}for(;u<T.length;u+=1)T[u].d(1);T.length=X.length}if(b&1&&(Ce=!be.includes(s[0].tags.genre)),Ce?C?C.p(s,b):(C=Ze(s),C.c(),C.m(D,Ee)):C&&(C.d(1),C=null),b&1){Z=be;let u;for(u=0;u<Z.length;u+=1){const L=Ue(s,Z,u);E[u]?E[u].p(L,b):(E[u]=xe(L),E[u].c(),E[u].m(D,null))}for(;u<E.length;u+=1)E[u].d(1);E.length=Z.length}b&1&&O.value!==s[0].tags.comment.text&&G(O,s[0].tags.comment.text),s[0].tags.APIC?F?F.p(s,b):(F=et(s),F.c(),F.m(H,null)):F&&(F.d(1),F=null)},i(s){q||(j(n.$$.fragment,s),j(V.$$.fragment,s),q=!0)},o(s){W(n.$$.fragment,s),W(V.$$.fragment,s),q=!1},d(s){s&&B(e),oe(n),de(w,s),de(T,s),C&&C.d(),de(E,s),F&&F.d(),oe(V),Fe=!1,He(je)}}}function kt(l,e,n){let t,r;x(l,N,d=>n(0,t=d)),x(l,ee,d=>n(11,r=d)),window.api.on("dir-opened",d=>{he(ee,r.mp3Files=d.contents,r),he(ee,r.name=d.name,r)});const a=d=>URL.createObjectURL(new Blob([d])),i=d=>{d.preventDefault(),d.stopPropagation()},m=d=>{d.preventDefault(),d.stopPropagation(),Object.values(d.dataTransfer.files).map($=>{($.path.endsWith("jpeg")||$.path.endsWith("jpg")||$.path.endsWith("png"))&&he(N,t.tags.APIC=window.api.getFileBuffer($.path),t)})},p=d=>{Object.values(d.target).map($=>{$ instanceof HTMLOptionElement&&$.selected&&he(N,t.tags.trackNumber=$.innerText,t)})};function h(){t.tags.title=this.value,N.set(t)}function c(){t.tags.artist=this.value,N.set(t)}function v(){t.tags.album=this.value,N.set(t)}function _(){t.tags.year=ot(this),N.set(t)}const M=d=>{p(d)};function Y(){t.tags.comment.text=this.value,N.set(t)}return[t,a,i,m,p,h,c,v,_,M,Y]}class $t extends pe{constructor(e){super();ge(this,e,kt,bt,me,{})}}new $t({target:document.getElementById("app")});
